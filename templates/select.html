{% extends 'base.html' %}
{% load static %}

{% block pagetitle %}
    <title xmlns="http://www.w3.org/1999/html">Select</title>
{% endblock pagetitle %}

{% block user %}
    {% if user.is_authenticated %}
        <p>You are logged in as:<br>&nbsp;{{ user.username }}</p>
    {% endif %}
{% endblock user %}

{% block javascript %}

    <link rel="stylesheet" href="https://js.arcgis.com/4.8/esri/css/main.css">
    <script src="https://js.arcgis.com/4.8/"></script>

    <script>
        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/GraphicsLayer",
            "dojo/domReady!"
            ], function(Map, MapView) {
                var map = new Map({
                    basemap: "topo-vector"
                });
                var view = new MapView({
                    container: "viewDiv",
                    map: map,
                    center: [-118.71511,34.09042],
                    zoom: 10
                });
                view.on("load", onMapLoad);

        });
        function onMapLoad(){
            alert("Loaded!");
        }
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
      html, body, #viewDiv {
        padding: 0;
        margin: 0;
        height: 400px;
        width: 400px;
      }
    </style>

    <style>
        .inlineTable {
            display: inline-block;
            vertical-align: top;
        }
        input[type=range][orient=vertical]
        {
            writing-mode: vertical-lr; /* IE */
            -webkit-appearance: slider-vertical; /* WebKit */
            width: 8px;
            height: 175px;
            padding: 0 5px;
        }
    </style>

    <script type="text/javascript">

        var selKeys = "";
        var table1, table2, table3, table4, table5, table6, table7, table8, table9;
        var RID = 0;
        var method = "{{ method }}";
        var loading = true;
        var selectedSamples = null;
        var sampIDs = "";
        var ptype = "mimarks";
        var fname = "organism";
        var fval = "";
        var clusterLevel = 50;
        var mainFilterChange = false;


        $(function () {

            // actual markers for map will be generated from a string, turn string into dictionary
            // loop through dictionary by key (lat-lon pair), create maker for each
            // each entry will have a string as a value, split based on ';'
            // then split each subsection off ':'
            // first sub-sub entry will be projectname, the rest are sample ids
            // populate temptree on select based on sample ids with projectname on top <- this seems cluttered
            // markers only display projectnames, use sample ids for populating tree
            // as in, when selecting a marker, get its sampleids
            /*
            var map = new google.maps.Map(
                document.getElementById('map'), {zoom: 3, center: {lat: 37.09024, lng: -95.712891}});

            var markers = [];

            var locationBasedSampleDict = {'{ locationBasedSampleDict | safe }'};
            var locationKeys = Object.keys(locationBasedSampleDict);
            for (var c=0; c<locationKeys.length; c++){
                var myKey = locationKeys[c];
                var myCoords= myKey.split(':');
                var myLat = parseFloat(myCoords[0]);
                var myLon = parseFloat(myCoords[1]);
                var myLocation = {lat: myLat, lng: myLon};
                // now get projects and samples
                // for now, label = projectnames, title (mouseover) = samplenames
                var myVals = locationBasedSampleDict[myKey].split(';');
                // value is ; seperable string, each split contains sampid:sampname:projectname
                var projectNameCountDict =  new Proxy({}, {
                    get: function(object, property) {
                        return object.hasOwnProperty(property) ? object[property] : 0;
                    }
                });
                var sampleCount = 0;
                var sampIDString = "";
                for (var i=0; i<myVals.length; i++){
                    var mySubset = myVals[i].split(':');
                    projectNameCountDict[mySubset[2]]++;
                    sampIDString += mySubset[0] + ":";
                    sampleCount++;
                }
                var projectNames = "";
                var projectNameCountKeys = Object.keys(projectNameCountDict);
                for (var j=0; j<projectNameCountKeys.length; j++){
                    projectNames += projectNameCountKeys[j] + ":" + projectNameCountDict[projectNameCountKeys[j]] + "\n";
                }
                // put it all on the map
                // change id:c into id:string_of_all_sampleids so we can retrieve that data on click
                var myMarker = new google.maps.Marker({position: myLocation, map: map, title: projectNames, label: ""+sampleCount, id: sampIDString});
                markers.push(myMarker);
                // this is strange looking by design, javascript closures are a thing, need to make sure the right values are in scope for this listener
                google.maps.event.addListener(myMarker, 'click', (function(marker) {
                    return function() {
                        map.panTo(marker.getPosition());
                        sampIDs = marker.id;
                        $("#markTree").dynatree("option", "initAjax", {
                            url: "/myPhyloDB/getLocationSamplesTree/",
                            dataType: "jsonp",
                             data: {
                                'sampleIDs': sampIDs
                             }
                        });
                        $("#markTree").dynatree("getTree").reload();
                        // they clicked on the marker! populate the tree!
                        // tree can be populated in javascript, we have all the data we need already (sampleid, name, project)
                        //var mySampIDs = marker.id.split(':'); // remember, last entry will be blank
                        //var curSampID;
                        //var selTree = $.map($("#tree"));
                        // call reload function for secondary selection tree, send sampleid list
                    }
                })(myMarker));

            }*/

            table1 = $('#projectTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'projectTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table2 = $('#sampleTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'sampleTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table3 = $('#referenceTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'referenceTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table4 = $('#airTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'airTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table5 = $('#humassoTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'associatedTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table6 = $('#microbialTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'microbialTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table7 = $('#soilTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'soilTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table8 = $('#waterTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'waterTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            table9 = $('#usrTable').DataTable({
                "dom": 'B<"toolbar">lfrtip',
                "deferRender": true,
                "ajax": {
                    "processing": false,
                    "url": "{% url 'userTableJSON' %}",
                    "data": {
                        "key": function () {
                            if (method == "GET") {
                                return JSON.stringify(selKeys);
                            } else if (method == "POST") {
                                return JSON.stringify("");
                            }
                        }
                    }
                },
                "scrollX": true,
                "bPaginate": true,
                "sPaginationType": 'full_numbers',
                "buttons": ['copy', 'csv', 'excel', 'pdf', 'print']
            });

            $("div.toolbar").html('<br><br>');
            $("#tabs").tabs({
                "activate": function(event, ui) {
                    $( $.fn.dataTable.tables( true ) ).DataTable()
                            .columns.adjust()
                            .buttons.resize();
                }
            });

            if ("{{ method }}" == "POST") {
                if ("{{ normpost }}" == "Success") {
                    document.getElementById("drawtable").disabled = false;
                    var selKeysStr = "{{ selList | safe }}";
                    selKeysStr = selKeysStr.replace(/'/g, '"');
                    selKeys = JSON.parse(selKeysStr);
                    setNorm(true);
                    alert("Uploaded samples were found in the database.\nYou may proceed directly to any analysis using your uploaded data.");
                    $("#upload").css("background-color", "green").val("Success!");
                } else if ("{{ normpost }}" == 'error') {
                    document.getElementById("drawtable").disabled = true;
                    selKeys = "";
                    setNorm(false);
                    $("#link0").hide();
                    $("#link1").hide();
                    $("#link2").hide();
                    $("#link3").hide();
                    $("#link4").hide();
                    $("#link5").hide();
                    $("#link6").hide();
                    alert("Sample(s) were not found in the database.\nPlease check your file.");
                    $("#upload").css("background-color", "red").val("Failed!");
                }
            }

            $("#drawtable").click(function () {
                method = "GET";
                updateTables();
            });

            $("#file").click(function () {
                method = "GET";
                $("#upload").css("background-color", "lightgray").val("Upload!");
                updateTables();
            });

            $("#tree").dynatree({
                checkbox: true,
                selectMode: 3,
                initAjax: {
                    url: "/myPhyloDB/getProjectTree/",
                    dataType: "jsonp",
                    data: {}
                },
                onLazyRead: function (node) {
                    loading = true;
                    node.appendAjax({
                        url: '/myPhyloDB/getProjectTreeChildren/',
                        data: {id: node.data.id},
                        success: function () {
                            loading = false;
                        }
                    });
                },
                onSelect: function (flag, node) {
                    if (flag && node.childList == undefined) {
                        node.reloadChildren(function () {
                            node.select(false);
                            node.select(true);
                        });
                    }
                },
                onRender: function(){
                    $("#tree").dynatree("getRoot").visit(function (node){
                        if (node.data.wip) {
                            node.data.addClass = "dynatree-highlight";
                        }
                    });
                },
                onClick: function () {
                    $("#submit").css("background-color", "lightgray").val("Save Selection(s)!");
                }
            });

            /*$("#markTree").dynatree({
                checkbox: true,
                selectMode: 3,
                initAjax: {
                    url: "/myPhyloDB/getLocationSamplesTree/",
                    dataType: "jsonp",
                    data: {
                        'sampleIDs': sampIDs
                    }
                },
                onSelect: function (select, node) {
                    // insert select mirroring logic here
                    // main problem I can see here, base selection tree is on lazy load
                    // so I guess get the project/parent nodes, expand those on the main tree (triggering lazy load?)
                    // after that, we can select the new child nodes with matching sampleids (ALWAYS ID, names are NOT unique)
                    // get selection status from tree? nah, just make it one way for now (click vs select? is it a toggle?)
                    selectedSamples = $.map($("#markTree").dynatree("getSelectedNodes"), function(node) {
                        if (node.getLevel() == 3) {
                            var parID = node.parent.data.id;
                            var selID = node.data.id;
                            // goto parID level 2 on main seltree, then its child with id selID, then run select(true)
                            $("#tree").dynatree("getRoot").visit(function (node) {
                                if (node.data.id == parID){
                                    node.expand(true);
                                }
                            });
                            // these are split to make sure lazy load works
                            setTimeout(function(){
                                $("#tree").dynatree("getRoot").visit(function (node) {
                                if (node.data.id == selID){
                                    node.select(true);
                                }
                            });
                            }, 100);

                        }
                    });
                }
            });*/

            $("#filterTree").dynatree({
                checkbox: true,
                selectMode: 3,
                initAjax: {
                    url: "/myPhyloDB/getFilterSamplesTree/",
                    dataType: "jsonp",
                    data: {
                        'ptype': ptype,
                        'fname': fname,
                        'fval': fval
                    }
                },
                onPostInit: function(isReloading, isError){
                    if (mainFilterChange) {
                        setTimeout(popFilterList(), 100);
                        mainFilterChange = false;
                    }
                },
                onSelect: function (select, node) {
                    // insert select mirroring logic here
                    // main problem I can see here, base selection tree is on lazy load
                    // so I guess get the project/parent nodes, expand those on the main tree (triggering lazy load?)
                    // after that, we can select the new child nodes with matching sampleids (ALWAYS ID, names are NOT unique)
                    // get selection status from tree? nah, just make it one way for now (click vs select? is it a toggle?)
                    selectedSamples = $.map($("#filterTree").dynatree("getSelectedNodes"), function(node) {
                        if (node.getLevel() == 3) {
                            var parID = node.parent.data.id;
                            var selID = node.data.id;
                            // goto parID level 2 on main seltree, then its child with id selID, then run select(true)
                            $("#tree").dynatree("getRoot").visit(function (node) {
                                if (node.data.id == parID){
                                    node.expand(true);
                                }
                            });
                            // these are split to make sure lazy load works
                            setTimeout(function(){
                                $("#tree").dynatree("getRoot").visit(function (node) {
                                if (node.data.id == selID){
                                    node.select(true);
                                }
                            });
                            }, 100);

                        }
                    });
                }
            });

            $("#clearMeta").click(function () {
                $("#tree").dynatree("getRoot").visit(function (node) {
                    node.select(false);
                });
                updateTables();
            });

            /*$("#clearMarks").click(function () {
                $("#markTree").dynatree("getRoot").visit(function (node) {
                    node.select(false);
                });
            });*/

            $("#upload").click(function () {
                $("#submit").css("background-color", "lightgray").val("Save Selection(s)!");
                $("#upload").css("background-color", "yellow").val("Uploading!");
            });

            $("#submit").click(function () {
                $("#upload").css("background-color", "lightgray").val("Upload!");
                checkTree();
            });

            $('<input>').attr({
                type: 'hidden',
                name: 'RID',
                value: makeGUID()
            }).appendTo('form');

        });

        function checkTree() {
            if (loading) {
                $("#submit").css("background-color", "yellow").val("Waiting for tree!");
                setTimeout(checkTree, 500);
                return;
            }

            selKeys = $.map($("#tree").dynatree("getSelectedNodes"), function(node) {
                if (node.getLevel() == 3) {
                    return node.data.id;
                }
                $("#submit").css("background-color", "yellow").val("Running!");
            });

            var jsonDict = JSON.stringify(selKeys);
            $.ajax({
                type: 'GET',
                url: '/myPhyloDB/saveSampleList/',
                data: {all: jsonDict},
                success: function (data) {
                    $("#submit").css("background-color", "green").val("Success!");
                    $("#link0").hide();
                    $("#link1").hide();
                    $("#link2").hide();
                    $("#link3").hide();
                    $("#link4").hide();
                    $("#link5").show();
                    $("#link6").hide();
                    document.getElementById("drawtable").disabled = false;
                    alert(data);
                },
                failure: function () {
                    $("#submit").css("background-color", "red").val("Failed!");
                }
            });
        }

        function makeGUID(){
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            })
        }

        function updateTables() {
            table1.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 0)
                } else {
                    $("#tabs").tabs("disable", 0)
                }
            });
            table2.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 1)
                } else {
                    $("#tabs").tabs("disable", 1)
                }
            });
            table3.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 2)
                } else {
                    $("#tabs").tabs("disable", 2)
                }
            });
            table4.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 3)
                } else {
                    $("#tabs").tabs("disable", 3)
                }
            });
            table5.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 4)
                } else {
                    $("#tabs").tabs("disable", 4)
                }
            });
            table6.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 5)
                } else {
                    $("#tabs").tabs("disable", 5)
                }
            });
            table7.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 6)
                } else {
                    $("#tabs").tabs("disable", 6)
                }
            });
            table8.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 7)
                } else {
                    $("#tabs").tabs("disable", 7)
                }
            });
            table9.ajax.reload( function(json) {
                if ( json['data'].length > 0 ) {
                    $("#tabs").tabs("enable", 8)
                } else {
                    $("#tabs").tabs("disable", 8)
                }
            });
        }

        function selectFilter() {
            // get value of selection menu, use to hide and display other datasets
            ptype = document.getElementById("filterType").value;
            if (ptype == "projects"){
                $("#tree").show();
                $("#filterTree").hide();
                $("#filter").hide();
                $("#filterValue").hide();
                $("#mimarkFilter").hide();
                $("#soilFilter").hide();
                $("#human_associatedFilter").hide();
                $("#airFilter").hide();
                $("#waterFilter").hide();
                $("#microbialFilter").hide();
                $("#user_definedFilter").hide();
            }
            if (ptype == "mimarks"){
                $("#tree").hide();
                $("#filterTree").show();
                $("#filter").show();
                $("#filterValue").show();
                $("#mimarkFilter").show();
                $("#soilFilter").hide();
                $("#human_associatedFilter").hide();
                $("#airFilter").hide();
                $("#waterFilter").hide();
                $("#microbialFilter").hide();
                $("#user_definedFilter").hide();
            }
            if (ptype == "soil"){
                $("#tree").hide();
                $("#filterTree").show();
                $("#filter").show();
                $("#filterValue").show();
                $("#mimarkFilter").hide();
                $("#soilFilter").show();
                $("#human_associatedFilter").hide();
                $("#airFilter").hide();
                $("#waterFilter").hide();
                $("#microbialFilter").hide();
                $("#user_definedFilter").hide();
            }
            if (ptype == "human_associated"){
                $("#tree").hide();
                $("#filterTree").show();
                $("#filter").show();
                $("#filterValue").show();
                $("#mimarkFilter").hide();
                $("#soilFilter").hide();
                $("#human_associatedFilter").show();
                $("#airFilter").hide();
                $("#waterFilter").hide();
                $("#microbialFilter").hide();
                $("#user_definedFilter").hide();
            }
            if (ptype == "air"){
                $("#tree").hide();
                $("#filterTree").show();
                $("#filter").show();
                $("#filterValue").show();
                $("#mimarkFilter").hide();
                $("#soilFilter").hide();
                $("#human_associatedFilter").hide();
                $("#airFilter").show();
                $("#waterFilter").hide();
                $("#microbialFilter").hide();
                $("#user_definedFilter").hide();
            }
            if (ptype == "water"){
                $("#tree").hide();
                $("#filterTree").show();
                $("#filter").show();
                $("#filterValue").show();
                $("#mimarkFilter").hide();
                $("#soilFilter").hide();
                $("#human_associatedFilter").hide();
                $("#airFilter").hide();
                $("#waterFilter").show();
                $("#microbialFilter").hide();
                $("#user_definedFilter").hide();
            }
            if (ptype == "microbial"){
                $("#tree").hide();
                $("#filterTree").show();
                $("#filter").show();
                $("#filterValue").show();
                $("#mimarkFilter").hide();
                $("#soilFilter").hide();
                $("#human_associatedFilter").hide();
                $("#airFilter").hide();
                $("#waterFilter").hide();
                $("#microbialFilter").show();
                $("#user_definedFilter").hide();
            }
            if (ptype == "user_defined"){
                $("#tree").hide();
                $("#filterTree").show();
                $("#filter").show();
                $("#filterValue").show();
                $("#mimarkFilter").hide();
                $("#soilFilter").hide();
                $("#human_associatedFilter").hide();
                $("#airFilter").hide();
                $("#waterFilter").hide();
                $("#microbialFilter").hide();
                $("#user_definedFilter").show();
            }
            updateFilter();
        }

        function getFilterData() {
            // call when submitting filter data, query database for samples containing specific values (not nan)
            // group results by actual value, then by project, saving sampleid and displaying name
            $("#filterTree").dynatree("option", "initAjax", {
                            url: "/myPhyloDB/getFilterSamplesTree/",
                            dataType: "jsonp",
                             data: {
                                'ptype': ptype,
                                'fname': fname,
                                 'fval': fval
                            }
                        });
            $("#filterTree").dynatree("getTree").reload();

        }

        function updateFilter() {
            if (ptype == "mimarks"){
                fname = document.getElementById("mimarkFilter").value;
            }
            if (ptype == "soil"){
                fname = document.getElementById("soilFilter").value;
            }
            if (ptype == "human_associated"){
                fname = document.getElementById("human_associatedFilter").value;
            }
            if (ptype == "air"){
                fname = document.getElementById("airFilter").value;
            }
            if (ptype == "water"){
                fname = document.getElementById("waterFilter").value;
            }
            if (ptype == "microbial"){
                fname = document.getElementById("microbialFilter").value;
            }
            if (ptype == "user_defined"){
                fname = document.getElementById("user_definedFilter").value;
            }
            if (fname == "nofilterselected" || ptype == "projects"){
                $("#filterValue").hide();
            }
            else {
                $("#filterValue").show();
            }
            fval = "";
            mainFilterChange = true;
            getFilterData();
        }
        function updateFilterVal() {
            fval = document.getElementById("filterValue").value;
            getFilterData();
        }

        function popFilterList() {
            var valDict = {};
            var found = 0;
            $("#filterTree").dynatree("getRoot").visit(function (node) {
                if (node.getLevel() == 3){
                    var myValue = node.data.title.split(";")[0].split(":")[1];
                    valDict[myValue] = myValue;
                    found++;
                }
            });
            var filterVal = document.getElementById("filterValue");
            var i;
            // wipe out old filter options before creating new ones
            for(i = filterVal.options.length - 1 ; i >= 0 ; i--)
            {
                filterVal.remove(i);
            }
            var blankOption = document.createElement("option");
            blankOption.value = "";
            blankOption.text = "No filter";
            filterVal.add(blankOption);
            var newFilters = Object.keys(valDict);
            for (var iter=0; iter<newFilters.length; iter++) {
                var option = document.createElement("option");
                var myVal = newFilters[iter];
                myVal = $.trim(myVal);
                option.value = myVal;
                option.text = myVal;
                filterVal.add(option);
            }
        }

        function updateMapZoom() {
            clusterLevel = document.getElementById("mapZoom").value;
            // change clustering in javascript, data is available, just move rounding to JS side instead of python

        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
{% endblock javascript %}

{% block my_content %}
    <div>
    <h2>Select new combination of sample(s):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="submit" type="button" value="Save Selection(s)!"/></h2>
    <table border="2" cellspacing="0" cellpadding="5" class="inlineTable">
        <tr>
            <th>Select any combination of data for analysis:<br><a href="#" id="clearMeta" style="font-size: 12px;">-Deselect all-</a></th>
            <th>Find samples based on data:</th>
        </tr>
        <tr>
            <td style="padding-right: 10px; vertical-align: top">
                <div id="tree"></div>
                <div id="filterTree" style="display:none;"></div>
            </td>
            <td valign="top">
                <table>
                    <tr>
                        <td>
                            <select id="filterType" onChange="selectFilter()">
                                <option value="projects" selected>Projects</option>
                                <option value="mimarks">Mimarks</option>
                                <option value="soil">Soil</option>
                                <option value="human_associated">Human Associated</option>
                                <option value="air">Air</option>
                                <option value="water">Water</option>
                                <option value="microbial">Microbial</option>
                                <option value="user_defined">User Defined</option>
                            </select>
                            <br>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="mimarkFilter" onchange="updateFilter();" style="display:none;">
                                <option value="nofilterselected" selected>No filter</option>
                                <option value="refid">myPhyloDB generated upload UUID</option>
                                <option value="organism">NCBI organism</option>
                                <option value="collection_date">Collection Date</option>
                                <option value="depth">Depth below soil surface</option>
                                <option value="elev">Elevation</option>
                                <option value="seq_platform">Sequencing platform</option>
                                <option value="seq_gene">Gene targeted for sequencing</option>
                                <option value="seq_gene_region">Gene region targeted for sequencing</option>
                                <option value="seq_barcode">Sequencing barcoder</option>
                                <option value="seq_for_primer">Sequencing forward primer</option>
                                <option value="seq_rev_primer">Sequencing reverse primer</option>
                                <option value="env_biome">Environment: biome</option>
                                <option value="env_feature">Environment: feature</option>
                                <option value="env_material">Environment: material</option>
                                <option value="geo_loc_country">Geographic location: country</option>
                                <option value="geo_loc_state">Geographic location: state</option>
                                <option value="geo_loc_city">Geographic location: city</option>
                                <option value="geo_loc_farm">Geographic location: farm</option>
                                <option value="geo_loc_plot">Geographic location: plot</option>
                                <option value="latitude">Latitude</option>
                                <option value="longitude">Longitude</option>
                                <option value="annual_season_precpt">Mean annual precipitation</option>
                                <option value="annual_season_temp">Mean annual temperature</option>
                            </select>
                            <select id="soilFilter" style="display: none;" onchange="updateFilter();">
                                <option value="nofilterselected" selected>No filter</option>
                                <option value="samp_collection_device">Sample: collection device</option>
                                <option value="samp_size">Sample: size</option>
                                <option value="samp_depth">Sample: depth range</option>
                                <option value="samp_prep">Sample: preparation</option>
                                <option value="samp_sieve_size">Sample: sieve size</option>
                                <option value="samp_store_dur">Sample: storage duration</option>
                                <option value="samp_store_loc">Sample: storage location</option>
                                <option value="samp_store_temp">Sample: storage temperature</option>
                                <option value="samp_weight_dna_ext">Sample: weight used for DNA extractions</option>
                                <option value="pool_dna_extracts">Sample: number of pooled DNA extracts</option>
                                <option value="fao_class">Soil: FAO classification</option>
                                <option value="local_class">Soil: USDA soil taxonomy</option>
                                <option value="texture_class">Soil: texture class</option>
                                <option value="porosity">Soil: porosity</option>
                                <option value="profile_position">Soil: profile position</option>
                                <option value="slope_aspect">Soil: slope aspect</option>
                                <option value="slope_gradient">Soil: slope gradient</option>
                                <option value="bulk_density">Soil: bulk density</option>
                                <option value="drainage_class">Soil: drainage class</option>
                                <option value="water_content_soil">Soil: water content</option>
                                <option value="cur_land_use">Crop: current land use</option>
                                <option value="cur_vegetation">Crop: current vegetation</option>
                                <option value="cur_crop">Crop: current crop</option>
                                <option value="cur_cultivar">Crop: current cultivar</option>
                                <option value="crop_rotation">Crop: crop rotation</option>
                                <option value="cover_crop">Crop: cover crop</option>
                                <option value="fert_amendment_class">Fertilizer: amendment class</option>
                                <option value="fert_placement">Fertilizer: placement</option>
                                <option value="fert_type">Fertilizer: type</option>
                                <option value="fert_tot_amount">Fertilizer: total amount</option>
                                <option value="fert_N_tot_amount">Fertilizer: total N amount</option>
                                <option value="fert_P_tot_amount">Fertilizer: total P amount</option>
                                <option value="fert_K_tot_amount">Fertilizer: total K amount</option>
                                <option value="irrigation_type">Irrigation: type</option>
                                <option value="irrigation_tot_amount">Irrigation: total amount</option>
                                <option value="residue_removal">Residue: type</option>
                                <option value="residue_growth_stage">Residue: growth stage at removal</option>
                                <option value="residue_removal_percent">Residue: amount removed</option>
                                <option value="tillage_event">Tillage: type</option>
                                <option value="tillage_event_depth">Tillage: depth</option>
                                <option value="amend1_class">Amendments: type</option>
                                <option value="amend1_active_ingredient">Amendments: active ingredient</option>
                                <option value="amend1_tot_amount">Amendments: total amount</option>
                                <option value="amend2_class">Amendments: type</option>
                                <option value="amend2_active_ingredient">Amendments: active ingredient</option>
                                <option value="amend2_tot_amount">Amendments: total amount</option>
                                <option value="amend3_class">Amendments: type</option>
                                <option value="amend3_active_ingredient">Amendments: active ingredient</option>
                                <option value="amend3_tot_amount">Amendments: total amount</option>
                                <option value="rRNA_copies">Microbial Biomass: rRNA copies</option>
                                <option value="microbial_biomass_C">Microbial Biomass: microbial biomass Carbon</option>
                                <option value="microbial_biomass_N">Microbial Biomass: microbial biomass Nitrogen</option>
                                <option value="microbial_respiration">Microbial Biomass: microbial respiration</option>
                                <option value="soil_pH">Soil nutrients: pH</option>
                                <option value="soil_EC">Soil nutrients: Electrical conductivity</option>
                                <option value="soil_C">Soil nutrients: Carbon</option>
                                <option value="soil_OM">Soil nutrients: Organic matter</option>
                                <option value="soil_N">Soil nutrients: Nitrogen</option>
                                <option value="soil_NO3_N">Soil nutrients: Nitrate Nitrogen</option>
                                <option value="soil_NH4_N">Soil nutrients: Ammonium Nitrogen</option>
                                <option value="soil_P">Soil nutrients: Phosphorous</option>
                                <option value="soil_K">Soil nutrients: Potassium</option>
                                <option value="soil_S">Soil nutrients: Sulfur</option>
                                <option value="soil_Zn">Soil nutrients: Zinc</option>
                                <option value="soil_Fe">Soil nutrients: Iron</option>
                                <option value="soil_Cu">Soil nutrients: Copper</option>
                                <option value="soil_Mn">Soil nutrients: Manganese</option>
                                <option value="soil_Ca">Soil nutrients: Calcium</option>
                                <option value="soil_Mg">Soil nutrients: Magnesium</option>
                                <option value="soil_Na">Soil nutrients: Sodium</option>
                                <option value="soil_B">Soil nutrients: Boron</option>
                                <option value="plant_C">Plant nutrients: Carbon</option>
                                <option value="plant_N">Plant nutrients: Nitrogen</option>
                                <option value="plant_P">Plant nutrients: Phosphorous</option>
                                <option value="plant_K">Plant nutrients: Potassium</option>
                                <option value="plant_Ca">Plant nutrients: Calcium</option>
                                <option value="plant_Mg">Plant nutrients: Magnesium</option>
                                <option value="plant_S">Plant nutrients: Sulfur</option>
                                <option value="plant_Na">Plant nutrients: Sodium</option>
                                <option value="plant_Cl">Plant nutrients: Choride</option>
                                <option value="plant_Al">Plant nutrients: Aluminum</option>
                                <option value="plant_B">Plant nutrients: Boron</option>
                                <option value="plant_Cu">Plant nutrients: Copper</option>
                                <option value="plant_Fe">Plant nutrients: Iron</option>
                                <option value="plant_Mn">Plant nutrients: Manganese</option>
                                <option value="plant_Zn">Plant nutrients: Zinc</option>
                                <option value="crop_tot_biomass_fw">Crop biomass: total fresh weight</option>
                                <option value="crop_tot_biomass_dw">Crop biomass: total dry weight</option>
                                <option value="crop_tot_above_biomass_fw">Crop biomass: total aboveground biomass fresh weight</option>
                                <option value="crop_tot_above_biomass_dw">Crop biomass: total aboveground biomass dry weight</option>
                                <option value="crop_tot_below_biomass_fw">Crop biomass: total belowground biomass fresh weight</option>
                                <option value="crop_tot_below_biomass_dw">Crop biomass: total belowground biomass dry weight</option>
                                <option value="harv_fraction">Crop biomass: harvested fraction</option>
                                <option value="harv_fresh_weight">Crop biomass: harvested fresh weight</option>
                                <option value="harv_dry_weight">Crop biomass: harvested dry weight</option>
                                <option value="ghg_chamber_placement">Greenhouse gas emissions: chamber placement</option>
                                <option value="ghg_N2O">Greenhouse gas emissions: N2O</option>
                                <option value="ghg_CO2">Greenhouse gas emission: CO2</option>
                                <option value="ghg_NH4">Greenhouse gas emission: NH4</option>
                                <option value="soil_texture_sand">Soil Health: sand</option>
                                <option value="soil_texture_silt">Soil Health: silt</option>
                                <option value="soil_texture_clay">Soil Health: clay</option>
                                <option value="soil_water_cap">Soil Health: water capacity</option>
                                <option value="soil_water_cap_rating">Soil Health: water capacity rating</option>
                                <option value="soil_surf_hard">Soil Health: surface hardness</option>
                                <option value="soil_surf_hard_rating">Soil Health: surface hardness rating</option>
                                <option value="soil_subsurf_hard">Soil Health: subsurface hardness</option>
                                <option value="soil_subsurf_hard_rating">Soil Health: subsurface hardness rating</option>
                                <option value="soil_agg_stability">Soil Health: aggregate stability</option>
                                <option value="soil_agg_stability_rating">Soil Health: aggregate stability rating</option>
                                <option value="soil_organic_matter">Soil Health: organic matter</option>
                                <option value="soil_organic_matter_rating">Soil Health: organic matter rating</option>
                                <option value="soil_ACE_protein">Soil Health: ACE protein index</option>
                                <option value="soil_ACE_protein_rating">Soil Health: ACE protein index rating</option>
                                <option value="soil_root_pathogen_pressure">Soil Health: root pathogen pressure</option>
                                <option value="soil_root_pathogen_pressure_rating">Soil Health: root pathogen pressure rating</option>
                                <option value="soil_respiration_four_day">Soil Health: respiration (four day)</option>
                                <option value="soil_respiration_four_day_rating">Soil Health: respiration rating (four day)</option>
                                <option value="soil_active_C">Soil Health: active Carbon</option>
                                <option value="soil_active_C_rating">Soil Health: active Carbon rating</option>
                                <option value="soil_pH_rating">Soil Health: pH</option>
                                <option value="soil_p_rating">Soil Health: p</option>
                                <option value="soil_k_rating">Soil Health: k</option>
                                <option value="soil_minor_elements_rating">Soil Health: minor elements rating</option>
                                <option value="CASH_SHI_rating">Soil Health: CASH SHI rating</option>
                            </select>
                            <select id="human_associatedFilter" style="display: none;" onchange="updateFilter();">
                                <option value="nofilterselected" selected>No filter</option>
                                <option value="samp_collect_device">Sample: collection device</option>
                                <option value="samp_mat_process">Sample: material processing</option>
                                <option value="samp_size">Sample: size</option>
                                <option value="samp_store_temp">Sample: storage temperature</option>
                                <option value="samp_store_dur">Sample: storage duration</option>
                                <option value="samp_type">Sample: type</option>
                                <option value="samp_location">Sample: location (body part)</option>
                                <option value="samp_temp">Sample: temperature</option>
                                <option value="samp_ph">Sample: pH</option>
                                <option value="samp_oxy_stat">Sample: oxygen status</option>
                                <option value="samp_salinity">Sample: salinity</option>
                                <option value="host_subject_id">Host: unique ID</option>
                                <option value="host_age">Host: age</option>
                                <option value="host_pulse">Host: pulse</option>
                                <option value="host_gender">Host: gender</option>
                                <option value="host_ethnicity">Host: ethnicity</option>
                                <option value="host_height">Host: height</option>
                                <option value="host_weight">Host: weight</option>
                                <option value="host_bmi">Host: body mass index</option>
                                <option value="host_weight_loss_3_month">Host: weight loss in the last 3 months</option>
                                <option value="host_body_temp">Host: body temperature</option>
                                <option value="host_occupation">Host: occupation</option>
                                <option value="pet_farm_animal">Host: pets owned</option>
                                <option value="smoker">Host: smoker</option>
                                <option value="diet_type">Diet: type</option>
                                <option value="diet_duration">Diet: duration</option>
                                <option value="diet_frequency">Diet: frequency</option>
                                <option value="diet_last_six_month">Diet: last six months</option>
                                <option value="last_meal">Diet: last meal</option>
                                <option value="medic_hist_perform">Disease: medical history performed</option>
                                <option value="disease_type">Disease: type</option>
                                <option value="disease_location">Disease: location (body part)</option>
                                <option value="disease_duration">Disease: duration</option>
                                <option value="organism_count">Disease: organism count</option>
                                <option value="tumor_location">Disease: tumor location</option>
                                <option value="tumor_mass">Disease: tumor mass</option>
                                <option value="tumor_stage">Disease: tumor stage</option>
                                <option value="drug_usage">Drugs: usage</option>
                                <option value="drug_type">Drugs: type</option>
                                <option value="drug_duration">Drugs: duration</option>
                                <option value="drug_frequency">Drugs: Frequency</option>
                                <option value="perturbation">Intervention: type</option>
                                <option value="pert_type">Intervention: chemical compound</option>
                                <option value="pert_duration">Intervention: duration</option>
                                <option value="pert_frequency">Intervention: frequency</option>
                                <option value="fetal_health_stat">Fetal: health status</option>
                                <option value="amniotic_fluid_color">Fetal: amniotic fluid color</option>
                                <option value="gestation_stat">Fetal: gestation state</option>
                                <option value="maternal_health_stat">Fetal: maternal health status</option>
                            </select>
                            <select id="airFilter" style="display: none;" onchange="updateFilter();">
                                <option value="nofilterselected" selected>No filter</option>
                                <option value="barometric_press">barometric_press</option>
                                <option value="carb_dioxide">carb_dioxide</option>
                                <option value="carb_monoxide">carb_monoxide</option>
                                <option value="chem_admin_term">chem_admin_term</option>
                                <option value="chem_admin_time">chem_admin_time</option>
                                <option value="elev">elev</option>
                                <option value="humidity">humidity</option>
                                <option value="methane">methane</option>
                                <option value="organism_type">organism_type</option>
                                <option value="organism_count">organism_count</option>
                                <option value="oxy_stat_samp">oxy_stat_samp</option>
                                <option value="oxygen">oxygen</option>
                                <option value="perturbation_type">perturbation_type</option>
                                <option value="perturbation_interval">perturbation_interval</option>
                                <option value="pollutants_type">pollutants_type</option>
                                <option value="pollutants_concentration">pollutants_concentration</option>
                                <option value="rel_to_oxygen">rel_to_oxygen</option>
                                <option value="resp_part_matter_substance">resp_part_matter_substance</option>
                                <option value="resp_part_matter_concentration">resp_part_matter_concentration</option>
                                <option value="samp_collect_device">samp_collect_device</option>
                                <option value="samp_mat_process">samp_mat_process</option>
                                <option value="samp_salinity">samp_salinity</option>
                                <option value="samp_size">samp_size</option>
                                <option value="samp_store_dur">samp_store_dur</option>
                                <option value="samp_store_loc">samp_store_loc</option>
                                <option value="samp_store_temp">samp_store_temp</option>
                                <option value="solar_irradiance">solar_irradiance</option>
                                <option value="temp">temp</option>
                                <option value="ventilation_rate">ventilation_rate</option>
                                <option value="ventilation_type">ventilation_type</option>
                                <option value="volatile_org_comp_name">volatile_org_comp_name</option>
                                <option value="volatile_org_comp_concentration">volatile_org_comp_concentration</option>
                                <option value="wind_direction">wind_direction</option>
                                <option value="wind_speed">wind_speed</option>
                            </select>
                            <select id="waterFilter" style="display: none;" onchange="updateFilter();">
                                <option value="nofilterselected" selected>No filter</option>
                                <option value="alkalinity">alkalinity</option>
                                <option value="alkyl_diethers">alkyl_diethers</option>
                                <option value="altitude">altitude</option>
                                <option value="aminopept_act">aminopept_act</option>
                                <option value="aminopept_act">aminopept_act</option>
                                <option value="atmospheric_data">atmospheric_data</option>
                                <option value="bac_prod">bac_prod</option>
                                <option value="bac_resp">bac_resp</option>
                                <option value="bacteria_carb_prod">bacteria_carb_prod</option>
                                <option value="biomass_part_name">biomass_part_name</option>
                                <option value="biomass_amount">biomass_amount</option>
                                <option value="bishomohopanol">bishomohopanol</option>
                                <option value="bromide">bromide</option>
                                <option value="calcium">calcium</option>
                                <option value="carb_nitro_ratio">carb_nitro_ratio</option>
                                <option value="chem_administration_name">chem_administration_name</option>
                                <option value="chem_administration_time">chem_administration_time</option>
                                <option value="chloride">chloride</option>
                                <option value="chlorophyll">chlorophyll</option>
                                <option value="conduc">conduc</option>
                                <option value="density">density</option>
                                <option value="diether_lipids">diether_lipids</option>
                                <option value="diss_carb_dioxide">diss_carb_dioxide</option>
                                <option value="diss_hydrogen">diss_hydrogen</option>
                                <option value="diss_inorg_carb">diss_inorg_carb</option>
                                <option value="diss_inorg_nitro">diss_inorg_nitro</option>
                                <option value="diss_inorg_phosp">diss_inorg_phosp</option>
                                <option value="diss_org_carb">diss_org_carb</option>
                                <option value="diss_org_nitro">diss_org_nitro</option>
                                <option value="diss_oxygen">diss_oxygen</option>
                                <option value="down_par">down_par</option>
                                <option value="elev">elev</option>
                                <option value="fluor">fluor</option>
                                <option value="glucosidase_act">glucosidase_act</option>
                                <option value="light_intensity">light_intensity</option>
                                <option value="magnesium">magnesium</option>
                                <option value="mean_frict_vel">mean_frict_vel</option>
                                <option value="mean_peak_frict_vel">mean_peak_frict_vel</option>
                                <option value="n_alkanes">n_alkanes</option>
                                <option value="nitrate">nitrate</option>
                                <option value="nitrite">nitrite</option>
                                <option value="nitro">nitro</option>
                                <option value="org_carb">org_carb</option>
                                <option value="org_matter">org_matter</option>
                                <option value="org_nitro">org_nitro</option>
                                <option value="organism_name">organism_name</option>
                                <option value="organism_count">organism_count</option>
                                <option value="oxy_stat_samp">oxy_stat_samp</option>
                                <option value="part_org_carb">part_org_carb</option>
                                <option value="part_org_nitro">part_org_nitro</option>
                                <option value="perturbation_type">perturbation_type</option>
                                <option value="perturbation_interval">perturbation_interval</option>
                                <option value="pretroleum_hydrocarb">pretroleum_hydrocarb</option>
                                <option value="ph">ph</option>
                                <option value="phaeopigments">phaeopigments</option>
                                <option value="phosphate">phosphate</option>
                                <option value="phosplipid_fatt_acid">phosplipid_fatt_acid</option>
                                <option value="photon_flux">photon_flux</option>
                                <option value="potassium">potassium</option>
                                <option value="pressure">pressure</option>
                                <option value="primary_prod">primary_prod</option>
                                <option value="redox_potential">redox_potential</option>
                                <option value="rel_to_oxygen">rel_to_oxygen</option>
                                <option value="samp_mat_process">samp_mat_process</option>
                                <option value="samp_salinity">samp_salinity</option>
                                <option value="samp_size">samp_size</option>
                                <option value="samp_store_dur">samp_store_dur</option>
                                <option value="samp_store_loc">samp_store_loc</option>
                                <option value="samp_store_temp">samp_store_temp</option>
                                <option value="samp_vol_we_dna_ext">samp_vol_we_dna_ext</option>
                                <option value="silicate">silicate</option>
                                <option value="sodium">sodium</option>
                                <option value="soluble_react_phosp">soluble_react_phosp</option>
                                <option value="source_material_id">source_material_id</option>
                                <option value="sulfate">sulfate</option>
                                <option value="sulfide">sulfide</option>
                                <option value="suspen_part_matter">suspen_part_matter</option>
                                <option value="temp">temp</option>
                                <option value="tidal_stage">tidal_stage</option>
                                <option value="tot_depth_water_col">tot_depth_water_col</option>
                                <option value="tot_diss_nitro">tot_diss_nitro</option>
                                <option value="tot_inorg_nitro">tot_inorg_nitro</option>
                                <option value="tot_nitro">tot_nitro</option>
                                <option value="tot_part_carb">tot_part_carb</option>
                                <option value="tot_phosp">tot_phosp</option>
                                <option value="water_current_direction">water_current_direction</option>
                                <option value="water_current_magnitude">water_current_magnitude</option>
                            </select>
                            <select id="microbialFilter" style="display: none;" onchange="updateFilter();">
                                <option value="nofilterselected" selected>No filter</option>
                                <option value="alkalinity">alkalinity</option>
                                <option value="alkyl_diethers">alkyl_diethers</option>
                                <option value="altitude">altitude</option>
                                <option value="aminopept_act">aminopept_act</option>
                                <option value="ammonium">ammonium</option>
                                <option value="bacteria_carb_prod">bacteria_carb_prod</option>
                                <option value="biomass_part_name">biomass_part_name</option>
                                <option value="biomass_amount">biomass_amount</option>
                                <option value="bishomohopanol">bishomohopanol</option>
                                <option value="bromide">bromide</option>
                                <option value="calcium">calcium</option>
                                <option value="carb_nitro_ratio">carb_nitro_ratio</option>
                                <option value="chem_administration_term">chem_administration_term</option>
                                <option value="chem_administration_time">chem_administration_time</option>
                                <option value="chloride">chloride</option>
                                <option value="chlorophyll">chlorophyll</option>
                                <option value="diether_lipids_name">diether_lipids_name</option>
                                <option value="diether_lipids_concentration">diether_lipids_concentration</option>
                                <option value="diss_carb_dioxide">diss_carb_dioxide</option>
                                <option value="diss_hydrogen">diss_hydrogen</option>
                                <option value="diss_inorg_carb">diss_inorg_carb</option>
                                <option value="diss_org_carb">diss_org_carb</option>
                                <option value="diss_org_nitro">diss_org_nitro</option>
                                <option value="diss_oxygen">diss_oxygen</option>
                                <option value="glucosidase_act">glucosidase_act</option>
                                <option value="magnesium">magnesium</option>
                                <option value="mean_frict_vel">mean_frict_vel</option>
                                <option value="mean_peak_frict_vel">mean_peak_frict_vel</option>
                                <option value="methane">methane</option>
                                <option value="n_alkanes_name">n_alkanes_name</option>
                                <option value="n_alkanes_concentration">n_alkanes_concentration</option>
                                <option value="nitrate">nitrate</option>
                                <option value="nitrite">nitrite</option>
                                <option value="nitro">nitro</option>
                                <option value="org_carb">org_carb</option>
                                <option value="org_matter">org_matter</option>
                                <option value="org_nitro">org_nitro</option>
                                <option value="organism_name">organism_name</option>
                                <option value="organism_count">organism_count</option>
                                <option value="oxy_stat_samp">oxy_stat_samp</option>
                                <option value="part_org_carb">part_org_carb</option>
                                <option value="perturbation_type">perturbation_type</option>
                                <option value="perturbation_interval">perturbation_interval</option>
                                <option value="petroleum_hydrocarb">petroleum_hydrocarb</option>
                                <option value="ph">ph</option>
                                <option value="phaeopigments_type">phaeopigments_type</option>
                                <option value="phaeopigments_concentration">phaeopigments_concentration</option>
                                <option value="phosphate">phosphate</option>
                                <option value="phosplipid_fatt_acid_name">phosplipid_fatt_acid_name</option>
                                <option value="phosplipid_fatt_acid_conc">phosplipid_fatt_acid_conc</option>
                                <option value="potassium">potassium</option>
                                <option value="pressure">pressure</option>
                                <option value="redox_potential">redox_potential</option>
                                <option value="rel_to_oxygen">rel_to_oxygen</option>
                                <option value="salinity">salinity</option>
                                <option value="samp_collect_device">samp_collect_device</option>
                                <option value="samp_mat_process">samp_mat_process</option>
                                <option value="samp_size">samp_size</option>
                                <option value="samp_store_dur">samp_store_dur</option>
                                <option value="samp_store_loc">samp_store_loc</option>
                                <option value="samp_store_temp">samp_store_temp</option>
                                <option value="silicate">silicate</option>
                                <option value="sodium">sodium</option>
                                <option value="sulfate">sulfate</option>
                                <option value="sulfide">sulfide</option>
                                <option value="temp">temp</option>
                                <option value="tot_carb">tot_carb</option>
                                <option value="tot_nitro">tot_nitro</option>
                                <option value="tot_org_carb">tot_org_carb</option>
                                <option value="turbidity">turbidity</option>
                                <option value="water_content">water_content</option>
                            </select>
                            <select id="user_definedFilter" style="display: none;" onchange="updateFilter();">
                                <option value="nofilterselected" selected>No filter</option>
                                <option value="usr_cat1">User-defined: categorical variable #1</option>
                                <option value="usr_cat2">User-defined: categorical variable #2</option>
                                <option value="usr_cat3">User-defined: categorical variable #3</option>
                                <option value="usr_cat4">User-defined: categorical variable #4</option>
                                <option value="usr_cat5">User-defined: categorical variable #5</option>
                                <option value="usr_cat6">User-defined: categorical variable #6</option>
                                <option value="usr_quant1">User-defined: quantitative variable #1</option>
                                <option value="usr_quant2">User-defined: quantitative variable #2</option>
                                <option value="usr_quant3">User-defined: quantitative variable #3</option>
                                <option value="usr_quant4">User-defined: quantitative variable #4</option>
                                <option value="usr_quant5">User-defined: quantitative variable #5</option>
                                <option value="usr_quant6">User-defined: quantitative variable #6</option>
                            </select>
                            <br>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <select id="filterValue" name="FilterValue" onchange="updateFilterVal();" style="display:none;">
                            </select>
                            <br>
                        </td>
                    </tr>
                </table>


            </td>
        </tr>
    </table>
    <br>
    <br>
    <br>
    <form id='form' action="{% url 'select' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h2>Upload previously normalized sample set</h2>
        <table width="650px" border="2" cellspacing="0" cellpadding="5" class="inlineTable">
            <tr>
                <td width="300x">Select normalized biom file (e.g., myphylodb.biom): <span title="This must be a custom myPhyloDB 'biom' file generated from a previous normalization."><font class="info" color="red">[info]</font></span></td>
                <td id="file" width="350px">{{ form9.normFile }}</td>
            </tr>
        </table>
        <br>
        <input id="upload" type="submit" value="Upload!"/>
    </form>
    </div>
    <br><br>
    <h2>Project/Sample information for selected samples:</h2>
    <input id="drawtable" type="button" disabled value="Populate DataTable!"/>
    <br><br>

    <div id="tabs" style="width: 950px">
        <ul>
            <li><a href="#tabs-1">Project</a></li>
            <li><a href="#tabs-2">Reference</a></li>
            <li><a href="#tabs-3">MIMARKs</a></li>
            <li><a href="#tabs-4">Air</a></li>
            <li><a href="#tabs-5">Human</a></li>
            <li><a href="#tabs-6">Microbial</a></li>
            <li><a href="#tabs-7">Soil</a></li>
            <li><a href="#tabs-8">Water</a></li>
            <li><a href="#tabs-9">User</a></li>
        </ul>

        <div id="tabs-1">
            <table id="projectTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="myPhyloDB generated project UUID">project_id</th>
                        <th title="Project status">project_status</th>
                        <th title="Project name">project_name</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th title="Project description">project_desc</th>
                        <th title="Project start date">start_date</th>
                        <th title="Project end date">end_date</th>
                        <th title="Principal investigator: last name">pi_last</th>
                        <th title="Principal investigator: first name">pi_first</th>
                        <th title="Principal investigator: affiliation">pi_affiliation</th>
                        <th title="Principal investigator: e-mail">pi_email</th>
                        <th title="Principal investigator: phone">pi_phone</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-2">
            <table id="referenceTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="myPhyloDB generated project UUID">projectid</th>
                        <th title="myPhyloDB generated upload UUID">refid</th>
                        <th title="True if raw data was uploaded & analyzed by myPhyloDB">raw</th>
                        <th title="File path to the uploaded data files">path</th>
                        <th title="Sequencing platform ('mothur' if pre-processed data)">source</th>
                        <th title="Username of person who uploaded data">author</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-3">
            <table id="sampleTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="myPhyloDB generated upload UUID">ref_id</th>
                        <th title="myPhylodb generated sample UUID">sample_id</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th title="NCBI organism">organism</th>
                        <th title="Collection Date">collection_date</th>
                        <th title="Depth below soil surface">depth</th>
                        <th title="Elevation">elev</th>
                        <th title="Sequencing platform">seq_platform</th>
                        <th title="Gene targeted for sequencing">seq_gene</th>
                        <th title="Gene region targeted for sequencing">seq_gene_region</th>
                        <th title="Sequencing barcoder">seq_barcode</th>
                        <th title="Sequencing forward primer">seq_for_primer</th>
                        <th title="Sequencing reverse primer">seq_rev_primer</th>
                        <th title="Environment: biome">env_biome</th>
                        <th title="Environment: feature">env_feature</th>
                        <th title="Environment: material">env_material</th>
                        <th title="Geographic location: country">geo_loc_country</th>
                        <th title="Geographic location: state">geo_loc_state</th>
                        <th title="Geographic location: city">geo_loc_city</th>
                        <th title="Geographic location: farm">geo_loc_farm</th>
                        <th title="Geographic location: plot">geo_loc_plot</th>
                        <th title="Latitude">latitude</th>
                        <th title="Longitude">longitude</th>
                        <th title="Mean annual precipitation">annual_season_precpt</th>
                        <th title="Mean annual temperature">annual_season_temp</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-4">
            <table id="airTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th>barometric_press</th>
                        <th>carb_dioxide</th>
                        <th>carb_monoxide</th>
                        <th>chem_admin_term</th>
                        <th>chem_admin_time</th>
                        <th>elev</th>
                        <th>humidity</th>
                        <th>methane</th>
                        <th>organism_type</th>
                        <th>organism_count</th>
                        <th>oxy_stat_samp</th>
                        <th>oxygen</th>
                        <th>perturbation_type</th>
                        <th>perturbation_interval</th>
                        <th>pollutants_type</th>
                        <th>pollutants_concentration</th>
                        <th>rel_to_oxygen</th>
                        <th>resp_part_matter_substance</th>
                        <th>resp_part_matter_concentration</th>
                        <th>samp_collect_device</th>
                        <th>samp_mat_process</th>
                        <th>samp_salinity</th>
                        <th>samp_size</th>
                        <th>samp_store_dur</th>
                        <th>samp_store_loc</th>
                        <th>samp_store_temp</th>
                        <th>solar_irradiance</th>
                        <th>temp</th>
                        <th>ventilation_rate</th>
                        <th>ventilation_type</th>
                        <th>volatile_org_comp_name</th>
                        <th>volatile_org_comp_concentration</th>
                        <th>wind_direction</th>
                        <th>wind_speed</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-5">
            <table id="humassoTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th title="Sample: collection device">samp_collect_device</th>
                        <th title="Sample: material processing">samp_mat_process</th>
                        <th title="Sample: size">samp_size</th>
                        <th title="Sample: storage temperature">samp_store_temp</th>
                        <th title="Sample: storage duration">samp_store_dur</th>
                        <th title="Sample: type">samp_type</th>
                        <th title="Sample: location (body part)">samp_location</th>
                        <th title="Sample: temperature">samp_temp</th>
                        <th title="Sample: pH">samp_ph</th>
                        <th title="Sample: oxygen status">samp_oxy_stat</th>
                        <th title="Sample: salinity">samp_salinity</th>
                        <th title="Host: unique ID">host_subject_id</th>
                        <th title="Host: age">host_age</th>
                        <th title="Host: pulse">host_pulse</th>
                        <th title="Host: gender">host_gender</th>
                        <th title="Host: ethnicity">host_ethnicity</th>
                        <th title="Host: height">host_height</th>
                        <th title="Host: weight">host_weight</th>
                        <th title="Host: body mass index">host_bmi</th>
                        <th title="Host: weight loss in the last 3 months">host_weight_loss_3_month</th>
                        <th title="Host: body temperature">host_body_temp</th>
                        <th title="Host: occupation">host_occupation</th>
                        <th title="Host: pets owned">pet_farm_animal</th>
                        <th title="Host: smoker">smoker</th>
                        <th title="Diet: type">diet_type</th>
                        <th title="Diet: duration">diet_duration</th>
                        <th title="Diet: frequency">diet_frequency</th>
                        <th title="Diet: last six months">diet_last_six_month</th>
                        <th title="Diet: last meal">last_meal</th>
                        <th title="Disease: medical history performed">medic_hist_perform</th>
                        <th title="Disease: type">disease_type</th>
                        <th title="Disease: location (body part)">disease_location</th>
                        <th title="Disease: duration">disease_duration</th>
                        <th title="Disease: organism count">organism_count</th>
                        <th title="Disease: tumor location">tumor_location</th>
                        <th title="Disease: tumor mass">tumor_mass</th>
                        <th title="Disease: tumor stage">tumor_stage</th>
                        <th title="Drugs: usage">drug_usage</th>
                        <th title="Drugs: type">drug_type</th>
                        <th title="Drugs: duration">drug_duration</th>
                        <th title="Drugs: Frequency">drug_frequency</th>
                        <th title="Intervention: type">perturbation</th>
                        <th title="Intervention: chemical compound">pert_type</th>
                        <th title="Intervention: duration">pert_duration</th>
                        <th title="Intervention: frequency">pert_frequency</th>
                        <th title="Fetal: health status">fetal_health_stat</th>
                        <th title="Fetal: amniotic fluid color">amniotic_fluid_color</th>
                        <th title="Fetal: gestation state">gestation_stat</th>
                        <th title="Fetal: maternal health status">maternal_health_stat</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-6">
            <table id="microbialTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th>alkalinity</th>
                        <th>alkyl_diethers</th>
                        <th>altitude</th>
                        <th>aminopept_act</th>
                        <th>ammonium</th>
                        <th>bacteria_carb_prod</th>
                        <th>biomass_part_name</th>
                        <th>biomass_amount</th>
                        <th>bishomohopanol</th>
                        <th>bromide</th>
                        <th>calcium</th>
                        <th>carb_nitro_ratio</th>
                        <th>chem_administration_term</th>
                        <th>chem_administration_time</th>
                        <th>chloride</th>
                        <th>chlorophyll</th>
                        <th>diether_lipids_name</th>
                        <th>diether_lipids_concentration</th>
                        <th>diss_carb_dioxide</th>
                        <th>diss_hydrogen</th>
                        <th>diss_inorg_carb</th>
                        <th>diss_org_carb</th>
                        <th>diss_org_nitro</th>
                        <th>diss_oxygen</th>
                        <th>glucosidase_act</th>
                        <th>magnesium</th>
                        <th>mean_frict_vel</th>
                        <th>mean_peak_frict_vel</th>
                        <th>methane</th>
                        <th>n_alkanes_name</th>
                        <th>n_alkanes_concentration</th>
                        <th>nitrate</th>
                        <th>nitrite</th>
                        <th>nitro</th>
                        <th>org_carb</th>
                        <th>org_matter</th>
                        <th>org_nitro</th>
                        <th>organism_name</th>
                        <th>organism_count</th>
                        <th>oxy_stat_samp</th>
                        <th>part_org_carb</th>
                        <th>perturbation_type</th>
                        <th>perturbation_interval</th>
                        <th>petroleum_hydrocarb</th>
                        <th>ph</th>
                        <th>phaeopigments_type</th>
                        <th>phaeopigments_concentration</th>
                        <th>phosphate</th>
                        <th>phosplipid_fatt_acid_name</th>
                        <th>phosplipid_fatt_acid_conc</th>
                        <th>potassium</th>
                        <th>pressure</th>
                        <th>redox_potential</th>
                        <th>rel_to_oxygen</th>
                        <th>salinity</th>
                        <th>samp_collect_device</th>
                        <th>samp_mat_process</th>
                        <th>samp_size</th>
                        <th>samp_store_dur</th>
                        <th>samp_store_loc</th>
                        <th>samp_store_temp</th>
                        <th>silicate</th>
                        <th>sodium</th>
                        <th>sulfate</th>
                        <th>sulfide</th>
                        <th>temp</th>
                        <th>tot_carb</th>
                        <th>tot_nitro</th>
                        <th>tot_org_carb</th>
                        <th>turbidity</th>
                        <th>water_content</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-7">
            <table id="soilTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th title="Sample: collection device">samp_collection_device</th>
                        <th title="Sample: size">samp_size</th>
                        <th title="Sample: depth range">samp_depth</th>
                        <th title="Sample: preparation">samp_prep</th>
                        <th title="Sample: sieve size">samp_sieve_size</th>
                        <th title="Sample: storage duration">samp_store_dur</th>
                        <th title="Sample: storage location">samp_store_loc</th>
                        <th title="Sample: storage temperature">samp_store_temp</th>
                        <th title="Sample: weight used for DNA extractions">samp_weight_dna_ext</th>
                        <th title="Sample: number of pooled DNA extracts">pool_dna_extracts</th>
                        <th title="Soil: FAO classification">fao_class</th>
                        <th title="Soil: USDA soil taxonomy">local_class</th>
                        <th title="Soil: texture class">texture_class</th>
                        <th title="Soil: porosity">porosity</th>
                        <th title="Soil: profile position">profile_position</th>
                        <th title="Soil: slope aspect">slope_aspect</th>
                        <th title="Soil: slope gradient">slope_gradient</th>
                        <th title="Soil: bulk density">bulk_density</th>
                        <th title="Soil: drainage class">drainage_class</th>
                        <th title="Soil: water content">water_content_soil</th>
                        <th title="Crop: current land use">cur_land_use</th>
                        <th title="Crop: current vegetation">cur_vegetation</th>
                        <th title="Crop: current crop">cur_crop</th>
                        <th title="Crop: current cultivar">cur_cultivar</th>
                        <th title="Crop: crop rotation">crop_rotation</th>
                        <th title="Crop: cover crop">cover_crop</th>
                        <th title="Fertilizer: amendment class">fert_amendment_class</th>
                        <th title="Fertilizer: placement">fert_placement</th>
                        <th title="Fertilizer: type">fert_type</th>
                        <th title="Fertilizer: total amount">fert_tot_amount</th>
                        <th title="Fertilizer: total N amount">fert_N_tot_amount</th>
                        <th title="Fertilizer: total P amount">fert_P_tot_amount</th>
                        <th title="Fertilizer: total K amount">fert_K_tot_amount</th>
                        <th title="Irrigation: type">irrigation_type</th>
                        <th title="Irrigation: total amount">irrigation_tot_amount</th>
                        <th title="Residue: type">residue_removal</th>
                        <th title="Residue: growth stage at removal">residue_growth_stage</th>
                        <th title="Residue: amount removed">residue_removal_percent</th>
                        <th title="Tillage: type">tillage_event</th>
                        <th title="Tillage: depth">tillage_event_depth</th>
                        <th title="Amendments: type">amend1_class</th>
                        <th title="Amendments: active ingredient">amend1_active_ingredient</th>
                        <th title="Amendments: total amount">amend1_tot_amount</th>
                        <th title="Amendments: type">amend2_class</th>
                        <th title="Amendments: active ingredient">amend2_active_ingredient</th>
                        <th title="Amendments: total amount">amend2_tot_amount</th>
                        <th title="Amendments: type">amend3_class</th>
                        <th title="Amendments: active ingredient">amend3_active_ingredient</th>
                        <th title="Amendments: total amount">amend3_tot_amount</th>
                        <th title="Microbial Biomass: rRNA copies">rRNA_copies</th>
                        <th title="Microbial Biomass: microbial biomass Carbon">microbial_biomass_C</th>
                        <th title="Microbial Biomass: microbial biomass Nitrogen">microbial_biomass_N</th>
                        <th title="Microbial Biomass: microbial respiration">microbial_respiration</th>
                        <th title="Soil nutrients: pH">soil_pH</th>
                        <th title="Soil nutrients: Electrical conductivity">soil_EC</th>
                        <th title="Soil nutrients: Carbon">soil_C</th>
                        <th title="Soil nutrients: Organic matter">soil_OM</th>
                        <th title="Soil nutrients: Nitrogen">soil_N</th>
                        <th title="Soil nutrients: Nitrate Nitrogen">soil_NO3_N</th>
                        <th title="Soil nutrients: Ammonium Nitrogen">soil_NH4_N</th>
                        <th title="Soil nutrients: Phosphorous">soil_P</th>
                        <th title="Soil nutrients: Potassium">soil_K</th>
                        <th title="Soil nutrients: Sulfur">soil_S</th>
                        <th title="Soil nutrients: Zinc">soil_Zn</th>
                        <th title="Soil nutrients: Iron">soil_Fe</th>
                        <th title="Soil nutrients: Copper">soil_Cu</th>
                        <th title="Soil nutrients: Manganese">soil_Mn</th>
                        <th title="Soil nutrients: Calcium">soil_Ca</th>
                        <th title="Soil nutrients: Magnesium">soil_Mg</th>
                        <th title="Soil nutrients: Sodium">soil_Na</th>
                        <th title="Soil nutrients: Boron">soil_B</th>
                        <th title="Plant nutrients: Carbon">plant_C</th>
                        <th title="Plant nutrients: Nitrogen">plant_N</th>
                        <th title="Plant nutrients: Phosphorous">plant_P</th>
                        <th title="Plant nutrients: Potassium">plant_K</th>
                        <th title="Plant nutrients: Calcium">plant_Ca</th>
                        <th title="Plant nutrients: Magnesium">plant_Mg</th>
                        <th title="Plant nutrients: Sulfur">plant_S</th>
                        <th title="Plant nutrients: Sodium">plant_Na</th>
                        <th title="Plant nutrients: Choride">plant_Cl</th>
                        <th title="Plant nutrients: Aluminum">plant_Al</th>
                        <th title="Plant nutrients: Boron">plant_B</th>
                        <th title="Plant nutrients: Copper">plant_Cu</th>
                        <th title="Plant nutrients: Iron">plant_Fe</th>
                        <th title="Plant nutrients: Manganese">plant_Mn</th>
                        <th title="Plant nutrients: Zinc">plant_Zn</th>
                        <th title="Crop biomass: total fresh weight">crop_tot_biomass_fw</th>
                        <th title="Crop biomass: total dry weight">crop_tot_biomass_dw</th>
                        <th title="Crop biomass: total aboveground biomass fresh weight">crop_tot_above_biomass_fw</th>
                        <th title="Crop biomass: total aboveground biomass dry weight">crop_tot_above_biomass_dw</th>
                        <th title="Crop biomass: total belowground biomass fresh weight">crop_tot_below_biomass_fw</th>
                        <th title="Crop biomass: total belowground biomass dry weight">crop_tot_below_biomass_dw</th>
                        <th title="Crop biomass: harvested fraction">harv_fraction</th>
                        <th title="Crop biomass: harvested fresh weight">harv_fresh_weight</th>
                        <th title="Crop biomass: harvested dry weight">harv_dry_weight</th>
                        <th title="Greenhouse gas emissions: chamber placement">ghg_chamber_placement</th>
                        <th title="Greenhouse gas emissions: N2O">ghg_N2O</th>
                        <th title="Greenhouse gas emission: CO2">ghg_CO2</th>
                        <th title="Greenhouse gas emission: NH4">ghg_NH4</th>
                        <th title="Soil Health: texture sand">soil_texture_sand</th>
                        <th title="Soil Health: texture silt">soil_texture_silt</th>
                        <th title="Soil Health: texture clay">soil_texture_clay</th>
                        <th title="Soil Health: water capacity">soil_water_cap</th>
                        <th title="Soil Health: water capacity rating">soil_water_cap_rating</th>
                        <th title="Soil Health: surface hardness">soil_surf_hardness</th>
                        <th title="Soil Health: surface hardness rating">soil_surf_hardness_rating</th>
                        <th title="Soil Health: subsurface hardness">soil_subsurf_hardness</th>
                        <th title="Soil Health: subsurface hardness rating">soil_subsurf_hardness_rating</th>
                        <th title="Soil Health: aggregate stability">soil_agg_stability</th>
                        <th title="Soil Health: aggregate stability rating">soil_agg_stability_rating</th>
                        <th title="Soil Health: organic matter">soil_organic_matter</th>
                        <th title="Soil Health: organic matter rating">soil_organic_matter_rating</th>
                        <th title="Soil Health: ACE protein index">soil_ACE_protein</th>
                        <th title="Soil Health: ACE protein index rating">soil_ACE_protein_index_rating</th>
                        <th title="Soil Health: root pathogen pressure">soil_root_pathogen_pressure</th>
                        <th title="Soil Health: root pathogen pressure rating">soil_root_pathogen_pressure_rating</th>
                        <th title="Soil Health: respiration (four day)">soil_respiration_four_day</th>
                        <th title="Soil Health: respiration rating (four day)">soil_respiration_four_day_rating</th>
                        <th title="Soil Health: active Carbon">soil_active_C</th>
                        <th title="Soil Health: active Carbon rating">soil_active_C_rating</th>
                        <th title="Soil Health: pH rating">soil_pH_rating</th>
                        <th title="Soil Health: P rating">soil_p_rating</th>
                        <th title="Soil Health: K rating">soil_k_rating</th>
                        <th title="Soil Health: minor elements rating">soil_minor_elements_rating</th>
                        <th title="Soil Health: CASH SHI rating">CASH_SHI_rating</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-8">
            <table id="waterTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th>alkalinity</th>
                        <th>alkyl_diethers</th>
                        <th>altitude</th>
                        <th>aminopept_act</th>
                        <th>ammonium</th>
                        <th>atmospheric_data</th>
                        <th>bac_prod</th>
                        <th>bac_resp</th>
                        <th>bacteria_carb_prod</th>
                        <th>biomass_part_name</th>
                        <th>biomass_amount</th>
                        <th>bishomohopanol</th>
                        <th>bromide</th>
                        <th>calcium</th>
                        <th>carb_nitro_ratio</th>
                        <th>chem_administration_name</th>
                        <th>chem_administration_time</th>
                        <th>chloride</th>
                        <th>chlorophyll</th>
                        <th>conduc</th>
                        <th>density</th>
                        <th>diether_lipids</th>
                        <th>diss_carb_dioxide</th>
                        <th>diss_hydrogen</th>
                        <th>diss_inorg_carb</th>
                        <th>diss_inorg_nitro</th>
                        <th>diss_inorg_phosp</th>
                        <th>diss_org_carb</th>
                        <th>diss_org_nitro</th>
                        <th>diss_oxygen</th>
                        <th>down_par</th>
                        <th>elev</th>
                        <th>fluor</th>
                        <th>glucosidase_act</th>
                        <th>light_intensity</th>
                        <th>magnesium</th>
                        <th>mean_frict_vel</th>
                        <th>mean_peak_frict_vel</th>
                        <th>n_alkanes</th>
                        <th>nitrate</th>
                        <th>nitrite</th>
                        <th>nitro</th>
                        <th>org_carb</th>
                        <th>org_matter</th>
                        <th>org_nitro</th>
                        <th>organism_name</th>
                        <th>organism_count</th>
                        <th>oxy_stat_samp</th>
                        <th>part_org_carb</th>
                        <th>part_org_nitro</th>
                        <th>perturbation_type</th>
                        <th>perturbation_interval</th>
                        <th>pretroleum_hydrocarb</th>
                        <th>ph</th>
                        <th>phaeopigments</th>
                        <th>phosphate</th>
                        <th>phosplipid_fatt_acid</th>
                        <th>photon_flux</th>
                        <th>potassium</th>
                        <th>pressure</th>
                        <th>primary_prod</th>
                        <th>redox_potential</th>
                        <th>rel_to_oxygen</th>
                        <th>samp_mat_process</th>
                        <th>samp_salinity</th>
                        <th>samp_size</th>
                        <th>samp_store_dur</th>
                        <th>samp_store_loc</th>
                        <th>samp_store_temp</th>
                        <th>samp_vol_we_dna_ext</th>
                        <th>silicate</th>
                        <th>sodium</th>
                        <th>soluble_react_phosp</th>
                        <th>source_material_id</th>
                        <th>sulfate</th>
                        <th>sulfide</th>
                        <th>suspen_part_matter</th>
                        <th>temp</th>
                        <th>tidal_stage</th>
                        <th>tot_depth_water_col</th>
                        <th>tot_diss_nitro</th>
                        <th>tot_inorg_nitro</th>
                        <th>tot_nitro</th>
                        <th>tot_part_carb</th>
                        <th>tot_phosp</th>
                        <th>water_current_direction</th>
                        <th>water_current_magnitude</th>
                    </tr>
                </thead>
            </table>
        </div>

        <div id="tabs-9">
            <table id="usrTable" cellpadding="0" cellspacing="0" border="0" class="display nowrap">
                <thead>
                    <tr>
                        <th title="Project name">project_name</th>
                        <th title="Sample name (mothur group name)">sample_name</th>
                        <th title="User-defined: categorical variable #1">usr_cat1</th>
                        <th title="User-defined: categorical variable #2">usr_cat2</th>
                        <th title="User-defined: categorical variable #3">usr_cat3</th>
                        <th title="User-defined: categorical variable #4">usr_cat4</th>
                        <th title="User-defined: categorical variable #5">usr_cat5</th>
                        <th title="User-defined: categorical variable #6">usr_cat6</th>
                        <th title="User-defined: quantitative variable #1">usr_quant1</th>
                        <th title="User-defined: quantitative variable #2">usr_quant2</th>
                        <th title="User-defined: quantitative variable #3">usr_quant3</th>
                        <th title="User-defined: quantitative variable #4">usr_quant4</th>
                        <th title="User-defined: quantitative variable #5">usr_quant5</th>
                        <th title="User-defined: quantitative variable #6">usr_quant6</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <br>
    <!--<br>
    <div id="map" style="width:400px;height:400px;float:left;display:none"></div>
    <br>
    <div id="viewDiv"></div>

    <table border="2" cellspacing="0" cellpadding="5" class="inlineTable">
        <tr>
            <th>Samples from map:<br><a href="#" id="clearMarks" style="font-size: 12px;">-Deselect all-</a></th>
        </tr>
        <tr>
            <td style="padding-right: 10px; vertical-align: top">
                <div id="markTree" style="float:right"></div>
            </td>
        </tr>
    </table>
    <br>
    <table border="2" cellspacing="0" cellpadding="5" class="inlineTable">
        <tr>
            <th>Map Clustering Slider</th>
        </tr>
        <tr>
            <td><input type="range" min="1" max="100" value="50" class="slider" id="mapZoom" onchange="updateMapZoom();"></td>
        </tr>
    </table>-->

    <br><br>
    <br><br>
    <br><br>
    <br><br>
    <br><br>

{% endblock my_content %}