$("#tree_taxa").dynatree({
    checkbox: true,
    selectMode: 2,
    initAjax: {
        url: '/myPhyloDB/getTaxaTree/',
        dataType: 'jsonp',
        data: {}
    },
    onLazyRead: function (node) {
        node.appendAjax({
            url: '/myPhyloDB/getTaxaTreeChildren/',
            data: {
                tooltip: node.data.tooltip,
                id: node.data.id
            }
        });
    },
    onSelect: function (flag, node) {
        if (flag && node.childList == undefined) {
            node.reloadChildren(function () {
                node.select(false);
                node.select(true);
            });
        }
        nodesTaxa = node.tree.getSelectedNodes();
        $("#run").css("background-color", "lightgray");
    },
    onClick: function () {
        taxaAll = 0;
        $("#selectall-taxa").val(0);
    }
});